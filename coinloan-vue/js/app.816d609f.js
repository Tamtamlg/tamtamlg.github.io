(function(t){function e(e){for(var n,a,o=e[0],u=e[1],c=e[2],l=0,d=[];l<o.length;l++)a=o[l],s[a]&&d.push(s[a][0]),s[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);f&&f(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,a=1;a<r.length;a++){var o=r[a];0!==s[o]&&(n=!1)}n&&(i.splice(e--,1),t=u(u.s=r[0]))}return t}var n={},a={app:0},s={app:0},i=[];function o(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-2e23b8c0":"8595e57b"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(t){var e=[],r={"chunk-2e23b8c0":1};a[t]?e.push(a[t]):0!==a[t]&&r[t]&&e.push(a[t]=new Promise(function(e,r){for(var n="css/"+({}[t]||t)+"."+{"chunk-2e23b8c0":"b0bdf101"}[t]+".css",s=u.p+n,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var c=i[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===s))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],l=c.getAttribute("data-href");if(l===n||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||s,i=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");i.request=n,delete a[t],f.parentNode.removeChild(f),r(i)},f.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(f)}).then(function(){a[t]=0}));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise(function(e,r){n=s[t]=[e,r]});e.push(n[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(t),c=function(e){l.onerror=l.onload=null,clearTimeout(d);var r=s[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+n+": "+a+")");i.type=n,i.request=a,r[1](i)}s[t]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,r){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(r,n,function(e){return t[e]}.bind(null,n));return r},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/coinloan-vue/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var f=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0eae":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"panel"},[r("header",{staticClass:"panel__head"},[r("h2",{staticClass:"panel__title"},[t._v(t._s(t.title))])]),r("div",{staticClass:"panel__body"},[t._t("body")],2),t.footer?r("footer",{staticClass:"panel__footer"},[t._t("footer")],2):t._e()])},a=[],s={name:"AppPanel",props:{title:{type:String,required:!0},footer:{type:Boolean,required:!0}}},i=s,o=(r("2e49"),r("2877")),u=Object(o["a"])(i,n,a,!1,null,"46c264ca",null);e["a"]=u.exports},"2e49":function(t,e,r){"use strict";var n=r("b9a9"),a=r.n(n);a.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view"),r("flash-message",{staticClass:"flash-message"})],1)},s=[],i=r("5118"),o={data:function(){return{ratesInterval:null}},created:function(){var t=this;this.$store.dispatch("getBudgetList"),this.$store.dispatch("getExchangeRates"),this.ratesInterval=Object(i["setInterval"])(function(){t.$store.dispatch("getExchangeRates")},3e4)},destroyed:function(){Object(i["clearInterval"])(this.ratesInterval)}},u=o,c=(r("5c0b"),r("2877")),l=Object(c["a"])(u,a,s,!1,null,null,null),d=l.exports,f=r("8c4f"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"budgets container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-md-8"},[r("app-panel",{attrs:{title:"Budgets",footer:!1}},[t.budgetList.length?r("ul",{staticClass:"budgets__list",attrs:{slot:"body"},slot:"body"},t._l(t.budgetList,function(e,n){return r("li",{key:n,staticClass:"budgets__item"},[r("div",{staticClass:"budgets__index"},[t._v("#"+t._s(n+1))]),r("div",{staticClass:"budgets__name"},[r("router-link",{attrs:{to:"/budgets/"+e.id+"/"}},[t._v(t._s(e.name)+" - "+t._s(e.balance.toFixed(2))+" "+t._s(e.currency))])],1),r("div",{staticClass:"budgets__actions"},[r("button",{staticClass:"btn btn--reset",on:{click:function(r){return t.resetBudget(e.id)}}},[t._v("Reset")]),r("button",{staticClass:"btn btn--del",on:{click:function(r){return t.deleteBudget(e.id)}}},[t._v("Delete")])])])}),0):r("div",{attrs:{slot:"body"},slot:"body"},[t._v("Please create a budget to see it in the list.")])])],1),r("div",{staticClass:"col col-md-4"},[r("app-panel",{attrs:{title:"Ð¡reate a new budget",footer:!1}},[r("div",{attrs:{slot:"body"},slot:"body"},[r("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.createBudget(e)}}},[r("div",{staticClass:"form__item",class:{"is-invalid":t.errors.first("name")}},[r("label",{attrs:{for:"budgetName"}},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form__control",attrs:{type:"text",id:"budgetName",name:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),r("span",{staticClass:"invalid-text"},[t._v(t._s(t.errors.first("name")))])]),r("div",{staticClass:"form__item",class:{"is-invalid":t.errors.first("selectedCurrency")}},[r("label",{attrs:{for:"budgetCurrency"}},[t._v("Currency")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCurrency,expression:"selectedCurrency"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form__control",attrs:{id:"budgetCurrency",name:"selectedCurrency"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedCurrency=e.target.multiple?r:r[0]}}},t._l(t.currency,function(e,n){return r("option",{key:n,domProps:{value:e}},[t._v(t._s(e))])}),0),r("span",{staticClass:"invalid-text"},[t._v(t._s(t.errors.first("selectedCurrency")))])]),r("div",{staticClass:"form__item",class:{"is-invalid":t.errors.first("amount")}},[r("label",{attrs:{for:"budgetAmount"}},[t._v("Amount")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form__control",attrs:{type:"number",step:"any",id:"budgetAmount",name:"amount"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),r("span",{staticClass:"invalid-text"},[t._v(t._s(t.errors.first("amount")))])]),r("div",{staticClass:"form__item"},[r("button",{staticClass:"btn btn--create form__btn",attrs:{type:"submit",disabled:!t.isFormValid}},[t._v("Create")])])])])])],1)])])},p=[],g=(r("7f7f"),r("0eae")),v={name:"budgets",components:{AppPanel:g["a"]},data:function(){return{selectedCurrency:"",name:"",amount:""}},computed:{isFormValid:function(){return this.selectedCurrency&&this.name.trim()&&this.amount},currency:function(){return this.$store.state.currency},budgetList:function(){return this.$store.state.budgetList}},methods:{createBudget:function(){var t={currency:this.selectedCurrency,name:this.name,amount:+this.amount};this.$store.dispatch("createBudget",t),this.resetForm()},resetForm:function(){this.selectedCurrency="",this.name="",this.amount="",this.$validator.reset()},deleteBudget:function(t){var e=this.budgetList.filter(function(e){return e.id!==+t});this.$store.dispatch("updateBudget",e)},resetBudget:function(t){this.budgetList.filter(function(e){return e.id===+t})[0].transactions=[],this.budgetList.filter(function(e){return e.id===+t})[0].balance=this.budgetList.filter(function(e){return e.id===+t})[0].amount,this.$store.dispatch("updateBudget",this.budgetList)}}},b=v,h=(r("5b38"),Object(c["a"])(b,m,p,!1,null,null,null)),y=h.exports;n["a"].use(f["a"]);var _=new f["a"]({mode:"history",base:"/coinloan-vue/",routes:[{path:"/",redirect:"/budgets"},{path:"/budgets",name:"budgets",component:y},{path:"/budgets/:id",name:"budget",component:function(){return r.e("chunk-2e23b8c0").then(r.bind(null,"867f"))}},{path:"*",redirect:"/budgets"}]}),C=(r("7514"),r("0a0d")),w=r.n(C),x=r("f499"),L=r.n(x),S=(r("96cf"),r("3b8d")),B=r("2f62"),O=r("bc3a"),k=r.n(O);n["a"].use(B["a"]);var j=new B["a"].Store({state:{exchangeRatesApi:"https://api.exchangeratesapi.io/latest?base=USD&symbols=",rates:{},currency:["EUR","USD","GBP","RUB"],budgetList:[]},mutations:{setBudgetList:function(t,e){t.budgetList=e},setRates:function(t,e){t.rates=e}},actions:{getExchangeRates:function(){var t=Object(S["a"])(regeneratorRuntime.mark(function t(e){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,a=e.commit,t.prev=1,t.next=4,k.a.get("".concat(r.exchangeRatesApi).concat(r.currency.join(","))).then(function(t){a("setRates",t.data.rates)}).catch(function(t){n["a"].prototype.$flashStorage.flash(t.message,"error",{timeout:3e3})});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),n["a"].prototype.$flashStorage.flash(t.t0.message,"error",{timeout:3e3});case 9:case"end":return t.stop()}},t,null,[[1,6]])}));function e(e){return t.apply(this,arguments)}return e}(),getBudgetList:function(t){var e=t.commit,r=JSON.parse(localStorage.getItem("budgetList"));r?e("setBudgetList",r):localStorage.setItem("budgetList",L()([]))},createBudget:function(t,e){var r=t.commit,n=JSON.parse(localStorage.getItem("budgetList"));n.push({id:w()(),name:e.name,currency:e.currency,amount:e.amount,balance:e.amount,transactions:[]}),localStorage.setItem("budgetList",L()(n)),r("setBudgetList",n)},updateBudget:function(t,e){var r=t.commit,a=e;localStorage.setItem("budgetList",L()(a)),r("setBudgetList",a),n["a"].prototype.$flashStorage.flash("Data successfully updated","success",{timeout:3e3})},createTransaction:function(){var t=Object(S["a"])(regeneratorRuntime.mark(function t(e,r){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,a=JSON.parse(localStorage.getItem("budgetList")),a.find(function(t){return t.id===r.id}).transactions.push({id:w()(),target:r.target,currency:r.currency,sum:r.sum}),a.find(function(t){return t.id===r.id}).balance=r.balance,localStorage.setItem("budgetList",L()(a)),n("setBudgetList",a);case 6:case"end":return t.stop()}},t)}));function e(e,r){return t.apply(this,arguments)}return e}(),updateBudgetAfterTransaction:function(t,e){var r=t.commit,n=JSON.parse(localStorage.getItem("budgetList"));n.find(function(t){return t.id===e.id}).balance=e.balance,localStorage.setItem("budgetList",L()(n)),r("setBudgetList",n)},deleteTransaction:function(){var t=Object(S["a"])(regeneratorRuntime.mark(function t(e,r){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,s=JSON.parse(localStorage.getItem("budgetList")),s.find(function(t){return t.id===r.id}).transactions=r.transactions,s.find(function(t){return t.id===r.id}).balance=r.balance,localStorage.setItem("budgetList",L()(s)),a("setBudgetList",s),n["a"].prototype.$flashStorage.flash("Data successfully updated","success",{timeout:3e3});case 7:case"end":return t.stop()}},t)}));function e(e,r){return t.apply(this,arguments)}return e}()}}),N=r("7bb1"),$=r("d00d"),I=r.n($);n["a"].config.productionTip=!1,n["a"].use(N["a"]),n["a"].use(I.a),new n["a"]({router:_,store:j,render:function(t){return t(d)}}).$mount("#app")},"58f7":function(t,e,r){},"5b38":function(t,e,r){"use strict";var n=r("58f7"),a=r.n(n);a.a},"5c0b":function(t,e,r){"use strict";var n=r("5e27"),a=r.n(n);a.a},"5e27":function(t,e,r){},b9a9:function(t,e,r){}});
//# sourceMappingURL=app.816d609f.js.map